<!-- <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
  </head>
  <body>
    <script>


//Dummy data
      var numberTime=[
        {'number':88,'time':1},
        {'number':43,'time':2},
        {'number':32,'time':1},
        {'number':90,'time':4},
        {'number':68,'time':3},
        {'number':11,'time':5}

      ]

//Client-side d3 code
      var w=400;
      var h=50;
      var line=d3.svg.line()
                .x(function(d){return d.number+8})
                .y(function(d){return h-d.time})
                .interpolate('linear');
      var svg=d3.select('body')
                .append('svg')
                .attr({
                  'width':w,
                  'height':h
                  })
      var path=svg.append('path')
                  .attr({
                    d:line(numberTime),
                    'fill':'none',
                    'stroke':'blue',
                  })
      var label=svg.selectAll('text')
                    .data(numberTime)
                    .enter()
                    .append('text')
                    .text(function(d){return d.number})
                    .attr({
                      x:(function(d){return d.number+8}),
                      y:(function(d){return h-d.time})
                    })
    </script>
  </body>
</html> -->


<!doctype html>
<html ng-app="app">
  <head>
    <!-- Reference AngularJS and D3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.3/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <!-- Reference n3-line-chart -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/line-chart/2.0.28/LineChart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/line-chart/2.0.28/LineChart.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js" charset="utf-8"></script>
  </head>
  <body ng-controller='MainCtrl'>
    <div class="my-chart">
      <linechart data="data" options="options"></linechart>
    </div>


    <script type="text/javascript">
        var time=0;
        var numberTime=[];
        var socket = io.connect();
      socket.on('number', function(data){
          numberTime.push({x:time++,value:data.number});
      });
      angular
        .module('app', ['n3-line-chart'])
        .controller('MainCtrl', function($scope) {
          //Client-side dummy data
            // $scope.data = {
            //   dataset0: [
            //
            //     {x: 0, value: 4, otherValue: 14},
            //     {x: 1, value: 8, otherValue: 1},
            //     {x: 2, value: 15, otherValue: 11},
            //     {x: 3, value: 16, otherValue: 14},
            //     {x: 4, value: 23, otherValue: 87},
            //     {x: 5, value: 42, otherValue: 45}
            //   ]
            // };
            $scope.data=numberTime;

          $scope.options = {
              margin: {top: 5},
              series: [
                {
                  axis: "y",
                  dataset: "numberTime",
                  key: "value",
                  label: "A dot series",
                  color: "hsla(88, 48%, 48%, 1)",
                  type: ["dot"],
                  id: "mySeries0"
                }
              ],
              axes: {
                x: {min:0,max:5},
                y: {min:0,max:100}
              }
              };
        });
    </script>
  </body>
</html>
